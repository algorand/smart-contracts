{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _invoke from \"lodash-es/invoke\";\nimport _forEach from \"lodash-es/forEach\";\nimport _without from \"lodash-es/without\";\nimport _includes from \"lodash-es/includes\";\nimport { Ref } from '@fluentui/react-component-ref';\nimport PropTypes from 'prop-types';\nimport React, { Component, createRef } from 'react';\nimport { eventStack, getElementType, getUnhandledProps, normalizeOffset, isBrowser } from '../../lib';\n/**\n * Visibility provides a set of callbacks for when a content appears in the viewport.\n */\n\nvar Visibility = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Visibility, _Component);\n\n  function Visibility() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this.calculations = {\n      bottomPassed: false,\n      bottomVisible: false,\n      fits: false,\n      passing: false,\n      offScreen: false,\n      onScreen: false,\n      topPassed: false,\n      topVisible: false\n    };\n    _this.firedCallbacks = [];\n    _this.ref = /*#__PURE__*/createRef();\n\n    _this.fire = function (_ref, value, reverse) {\n      var callback = _ref.callback,\n          name = _ref.name;\n\n      if (reverse === void 0) {\n        reverse = false;\n      }\n\n      var _this$props = _this.props,\n          continuous = _this$props.continuous,\n          once = _this$props.once; // Heads up! For the execution is required:\n      // - current value correspond to the fired direction\n      // - `continuous` is true or calculation values are different\n\n      var matchesDirection = _this.calculations[value] !== reverse;\n      var executionPossible = continuous || _this.calculations[value] !== _this.oldCalculations[value];\n      if (matchesDirection && executionPossible) _this.execute(callback, name); // Heads up! We should remove callback from the happened when it's not `once`\n\n      if (!once) _this.firedCallbacks = _without(_this.firedCallbacks, name);\n    };\n\n    _this.handleUpdate = function () {\n      if (_this.ticking) return;\n      _this.ticking = true;\n      _this.frameId = requestAnimationFrame(_this.update);\n    };\n\n    _this.update = function () {\n      if (!_this.mounted) return;\n      _this.ticking = false;\n      _this.oldCalculations = _this.calculations;\n      _this.calculations = _this.computeCalculations();\n      _this.pageYOffset = _this.getPageYOffset();\n      var _this$props2 = _this.props,\n          onBottomPassed = _this$props2.onBottomPassed,\n          onBottomPassedReverse = _this$props2.onBottomPassedReverse,\n          onBottomVisible = _this$props2.onBottomVisible,\n          onBottomVisibleReverse = _this$props2.onBottomVisibleReverse,\n          onPassing = _this$props2.onPassing,\n          onPassingReverse = _this$props2.onPassingReverse,\n          onTopPassed = _this$props2.onTopPassed,\n          onTopPassedReverse = _this$props2.onTopPassedReverse,\n          onTopVisible = _this$props2.onTopVisible,\n          onTopVisibleReverse = _this$props2.onTopVisibleReverse,\n          onOffScreen = _this$props2.onOffScreen,\n          onOnScreen = _this$props2.onOnScreen,\n          updateOn = _this$props2.updateOn;\n      var forward = {\n        bottomPassed: {\n          callback: onBottomPassed,\n          name: 'onBottomPassed'\n        },\n        bottomVisible: {\n          callback: onBottomVisible,\n          name: 'onBottomVisible'\n        },\n        passing: {\n          callback: onPassing,\n          name: 'onPassing'\n        },\n        offScreen: {\n          callback: onOffScreen,\n          name: 'onOffScreen'\n        },\n        onScreen: {\n          callback: onOnScreen,\n          name: 'onOnScreen'\n        },\n        topPassed: {\n          callback: onTopPassed,\n          name: 'onTopPassed'\n        },\n        topVisible: {\n          callback: onTopVisible,\n          name: 'onTopVisible'\n        }\n      };\n      var reverse = {\n        bottomPassed: {\n          callback: onBottomPassedReverse,\n          name: 'onBottomPassedReverse'\n        },\n        bottomVisible: {\n          callback: onBottomVisibleReverse,\n          name: 'onBottomVisibleReverse'\n        },\n        passing: {\n          callback: onPassingReverse,\n          name: 'onPassingReverse'\n        },\n        topPassed: {\n          callback: onTopPassedReverse,\n          name: 'onTopPassedReverse'\n        },\n        topVisible: {\n          callback: onTopVisibleReverse,\n          name: 'onTopVisibleReverse'\n        }\n      };\n\n      _invoke(_this.props, 'onUpdate', null, _extends({}, _this.props, {\n        calculations: _this.calculations\n      }));\n\n      _this.fireOnPassed(); // Heads up! Reverse callbacks should be fired first\n\n\n      _forEach(reverse, function (data, value) {\n        return _this.fire(data, value, true);\n      });\n\n      _forEach(forward, function (data, value) {\n        return _this.fire(data, value);\n      });\n\n      if (updateOn === 'repaint') _this.handleUpdate();\n    };\n\n    return _this;\n  }\n\n  var _proto = Visibility.prototype; // ----------------------------------------\n  // Lifecycle\n  // ----------------------------------------\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.mounted = true;\n    if (!isBrowser()) return;\n    var _this$props3 = this.props,\n        context = _this$props3.context,\n        fireOnMount = _this$props3.fireOnMount,\n        updateOn = _this$props3.updateOn;\n    this.pageYOffset = this.getPageYOffset();\n    this.attachHandlers(context, updateOn);\n    if (fireOnMount) this.update();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var cleanHappened = prevProps.continuous !== this.props.continuous || prevProps.once !== this.props.once || prevProps.updateOn !== this.props.updateOn; // Heads up! We should clean up array of happened callbacks, if values of these props are changed\n\n    if (cleanHappened) this.firedCallbacks = [];\n\n    if (prevProps.context !== this.props.context || prevProps.updateOn !== this.props.updateOn) {\n      this.unattachHandlers(prevProps.context);\n      this.attachHandlers(this.props.context, this.props.updateOn);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var context = this.props.context;\n    this.unattachHandlers(context);\n    this.mounted = false;\n  };\n\n  _proto.attachHandlers = function attachHandlers(context, updateOn) {\n    if (updateOn === 'events') {\n      if (context) {\n        eventStack.sub('resize', this.handleUpdate, {\n          target: context\n        });\n        eventStack.sub('scroll', this.handleUpdate, {\n          target: context\n        });\n      }\n\n      return;\n    } // Heads up!\n    // We will deal with `repaint` there\n\n\n    this.handleUpdate();\n  };\n\n  _proto.unattachHandlers = function unattachHandlers(context) {\n    if (context) {\n      eventStack.unsub('resize', this.handleUpdate, {\n        target: context\n      });\n      eventStack.unsub('scroll', this.handleUpdate, {\n        target: context\n      });\n    }\n\n    if (this.frameId) cancelAnimationFrame(this.frameId);\n  } // ----------------------------------------\n  // Callback handling\n  // ----------------------------------------\n  ;\n\n  _proto.execute = function execute(callback, name) {\n    var continuous = this.props.continuous;\n    if (!callback) return; // Heads up! When `continuous` is true, callback will be fired always\n\n    if (!continuous && _includes(this.firedCallbacks, name)) return;\n    callback(null, _extends({}, this.props, {\n      calculations: this.calculations\n    }));\n    this.firedCallbacks.push(name);\n  };\n\n  _proto.fireOnPassed = function fireOnPassed() {\n    var _this2 = this;\n\n    var _this$calculations = this.calculations,\n        percentagePassed = _this$calculations.percentagePassed,\n        pixelsPassed = _this$calculations.pixelsPassed;\n    var onPassed = this.props.onPassed;\n\n    _forEach(onPassed, function (callback, passed) {\n      var pixelsValue = Number(passed);\n\n      if (pixelsValue && pixelsPassed >= pixelsValue) {\n        _this2.execute(callback, passed);\n\n        return;\n      }\n\n      var matchPercentage = (\"\" + passed).match(/^(\\d+)%$/);\n      if (!matchPercentage) return;\n      var percentageValue = Number(matchPercentage[1]) / 100;\n      if (percentagePassed >= percentageValue) _this2.execute(callback, passed);\n    });\n  }; // ----------------------------------------\n  // Helpers\n  // ----------------------------------------\n\n\n  _proto.computeCalculations = function computeCalculations() {\n    var offset = this.props.offset;\n\n    var _this$ref$current$get = this.ref.current.getBoundingClientRect(),\n        bottom = _this$ref$current$get.bottom,\n        height = _this$ref$current$get.height,\n        top = _this$ref$current$get.top,\n        width = _this$ref$current$get.width;\n\n    var _normalizeOffset = normalizeOffset(offset),\n        topOffset = _normalizeOffset[0],\n        bottomOffset = _normalizeOffset[1];\n\n    var newOffset = this.getPageYOffset();\n    var direction = newOffset > this.pageYOffset ? 'down' : 'up';\n    var topPassed = top < topOffset;\n    var bottomPassed = bottom < bottomOffset;\n    var pixelsPassed = bottomPassed ? 0 : Math.max(top * -1, 0);\n    var percentagePassed = pixelsPassed / height;\n    var bottomVisible = bottom >= bottomOffset && bottom <= window.innerHeight;\n    var topVisible = top >= topOffset && top <= window.innerHeight;\n    var fits = topVisible && bottomVisible;\n    var passing = topPassed && !bottomPassed;\n    var onScreen = (topVisible || topPassed) && !bottomPassed;\n    var offScreen = !onScreen;\n    return {\n      bottomPassed: bottomPassed,\n      bottomVisible: bottomVisible,\n      direction: direction,\n      fits: fits,\n      height: height,\n      passing: passing,\n      percentagePassed: percentagePassed,\n      pixelsPassed: pixelsPassed,\n      offScreen: offScreen,\n      onScreen: onScreen,\n      topPassed: topPassed,\n      topVisible: topVisible,\n      width: width\n    };\n  };\n\n  _proto.getPageYOffset = function getPageYOffset() {\n    var context = this.props.context;\n\n    if (context) {\n      // Heads up! `window` doesn't have `pageYOffset` property\n      return context === window ? window.pageYOffset : context.scrollTop;\n    }\n\n    return 0;\n  } // ----------------------------------------\n  // Render\n  // ----------------------------------------\n  ;\n\n  _proto.render = function render() {\n    var children = this.props.children;\n    var ElementType = getElementType(Visibility, this.props);\n    var rest = getUnhandledProps(Visibility, this.props);\n    return /*#__PURE__*/React.createElement(Ref, {\n      innerRef: this.ref\n    }, /*#__PURE__*/React.createElement(ElementType, rest, children));\n  };\n\n  return Visibility;\n}(Component);\n\nVisibility.handledProps = [\"as\", \"children\", \"context\", \"continuous\", \"fireOnMount\", \"offset\", \"onBottomPassed\", \"onBottomPassedReverse\", \"onBottomVisible\", \"onBottomVisibleReverse\", \"onOffScreen\", \"onOnScreen\", \"onPassed\", \"onPassing\", \"onPassingReverse\", \"onTopPassed\", \"onTopPassedReverse\", \"onTopVisible\", \"onTopVisibleReverse\", \"onUpdate\", \"once\", \"updateOn\"];\nexport { Visibility as default };\nVisibility.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Context which visibility should attach onscroll events. */\n  context: PropTypes.object,\n\n  /**\n   * When set to true a callback will occur anytime an element passes a condition not just immediately after the\n   * threshold is met.\n   */\n  continuous: PropTypes.bool,\n\n  /** Fires callbacks immediately after mount. */\n  fireOnMount: PropTypes.bool,\n\n  /**\n   * Element's bottom edge has passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassed: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassedReverse: PropTypes.func,\n\n  /**\n   * Element's bottom edge has passed bottom of screen\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisible: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisibleReverse: PropTypes.func,\n\n  /**\n   * Value that context should be adjusted in pixels. Useful for making content appear below content fixed to the\n   * page.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string]))]),\n\n  /** When set to false a callback will occur each time an element passes the threshold for a condition. */\n  once: PropTypes.bool,\n\n  /** Element is not visible on the screen. */\n  onPassed: PropTypes.object,\n\n  /**\n   * Any part of an element is visible on screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassing: PropTypes.func,\n\n  /**\n   * Element's top has not passed top of screen but bottom has.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassingReverse: PropTypes.func,\n\n  /**\n   * Element is not visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOffScreen: PropTypes.func,\n\n  /**\n   * Element is visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOnScreen: PropTypes.func,\n\n  /**\n   * Element's top edge has passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassed: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassedReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisible: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisibleReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onUpdate: PropTypes.func,\n\n  /**\n   * Allows to choose the mode of the position calculations:\n   * - `events` - (default) update and fire callbacks only on scroll/resize events\n   * - `repaint` - update and fire callbacks on browser repaint (animation frames)\n   */\n  updateOn: PropTypes.oneOf(['events', 'repaint'])\n} : {};\nVisibility.defaultProps = {\n  context: isBrowser() ? window : null,\n  continuous: false,\n  offset: [0, 0],\n  once: true,\n  updateOn: 'events'\n};","map":{"version":3,"sources":["/Users/jason/code/smartcontracts/smart-contracts/devrel/algosigner-react-first/node_modules/semantic-ui-react/dist/es/behaviors/Visibility/Visibility.js"],"names":["_extends","_inheritsLoose","_invoke","_forEach","_without","_includes","Ref","PropTypes","React","Component","createRef","eventStack","getElementType","getUnhandledProps","normalizeOffset","isBrowser","Visibility","_Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","calculations","bottomPassed","bottomVisible","fits","passing","offScreen","onScreen","topPassed","topVisible","firedCallbacks","ref","fire","_ref","value","reverse","callback","name","_this$props","props","continuous","once","matchesDirection","executionPossible","oldCalculations","execute","handleUpdate","ticking","frameId","requestAnimationFrame","update","mounted","computeCalculations","pageYOffset","getPageYOffset","_this$props2","onBottomPassed","onBottomPassedReverse","onBottomVisible","onBottomVisibleReverse","onPassing","onPassingReverse","onTopPassed","onTopPassedReverse","onTopVisible","onTopVisibleReverse","onOffScreen","onOnScreen","updateOn","forward","fireOnPassed","data","_proto","prototype","componentDidMount","_this$props3","context","fireOnMount","attachHandlers","componentDidUpdate","prevProps","cleanHappened","unattachHandlers","componentWillUnmount","sub","target","unsub","cancelAnimationFrame","push","_this2","_this$calculations","percentagePassed","pixelsPassed","onPassed","passed","pixelsValue","Number","matchPercentage","match","percentageValue","offset","_this$ref$current$get","current","getBoundingClientRect","bottom","height","top","width","_normalizeOffset","topOffset","bottomOffset","newOffset","direction","Math","max","window","innerHeight","scrollTop","render","children","ElementType","rest","createElement","innerRef","handledProps","default","propTypes","process","env","NODE_ENV","as","elementType","node","object","bool","func","oneOfType","number","string","arrayOf","onUpdate","oneOf","defaultProps"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oCAArB;AACA,OAAOC,cAAP,MAA2B,0CAA3B;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,SAASC,GAAT,QAAoB,+BAApB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAASC,UAAT,EAAqBC,cAArB,EAAqCC,iBAArC,EAAwDC,eAAxD,EAAyEC,SAAzE,QAA0F,WAA1F;AACA;AACA;AACA;;AAEA,IAAIC,UAAU,GAAG,aAAa,UAAUC,UAAV,EAAsB;AAClDhB,EAAAA,cAAc,CAACe,UAAD,EAAaC,UAAb,CAAd;;AAEA,WAASD,UAAT,GAAsB;AACpB,QAAIE,KAAJ;;AAEA,SAAK,IAAIC,IAAI,GAAGC,SAAS,CAACC,MAArB,EAA6BC,IAAI,GAAG,IAAIC,KAAJ,CAAUJ,IAAV,CAApC,EAAqDK,IAAI,GAAG,CAAjE,EAAoEA,IAAI,GAAGL,IAA3E,EAAiFK,IAAI,EAArF,EAAyF;AACvFF,MAAAA,IAAI,CAACE,IAAD,CAAJ,GAAaJ,SAAS,CAACI,IAAD,CAAtB;AACD;;AAEDN,IAAAA,KAAK,GAAGD,UAAU,CAACQ,IAAX,CAAgBC,KAAhB,CAAsBT,UAAtB,EAAkC,CAAC,IAAD,EAAOU,MAAP,CAAcL,IAAd,CAAlC,KAA0D,IAAlE;AACAJ,IAAAA,KAAK,CAACU,YAAN,GAAqB;AACnBC,MAAAA,YAAY,EAAE,KADK;AAEnBC,MAAAA,aAAa,EAAE,KAFI;AAGnBC,MAAAA,IAAI,EAAE,KAHa;AAInBC,MAAAA,OAAO,EAAE,KAJU;AAKnBC,MAAAA,SAAS,EAAE,KALQ;AAMnBC,MAAAA,QAAQ,EAAE,KANS;AAOnBC,MAAAA,SAAS,EAAE,KAPQ;AAQnBC,MAAAA,UAAU,EAAE;AARO,KAArB;AAUAlB,IAAAA,KAAK,CAACmB,cAAN,GAAuB,EAAvB;AACAnB,IAAAA,KAAK,CAACoB,GAAN,GAAY,aAAa5B,SAAS,EAAlC;;AAEAQ,IAAAA,KAAK,CAACqB,IAAN,GAAa,UAAUC,IAAV,EAAgBC,KAAhB,EAAuBC,OAAvB,EAAgC;AAC3C,UAAIC,QAAQ,GAAGH,IAAI,CAACG,QAApB;AAAA,UACIC,IAAI,GAAGJ,IAAI,CAACI,IADhB;;AAGA,UAAIF,OAAO,KAAK,KAAK,CAArB,EAAwB;AACtBA,QAAAA,OAAO,GAAG,KAAV;AACD;;AAED,UAAIG,WAAW,GAAG3B,KAAK,CAAC4B,KAAxB;AAAA,UACIC,UAAU,GAAGF,WAAW,CAACE,UAD7B;AAAA,UAEIC,IAAI,GAAGH,WAAW,CAACG,IAFvB,CAR2C,CAUd;AAC7B;AACA;;AAEA,UAAIC,gBAAgB,GAAG/B,KAAK,CAACU,YAAN,CAAmBa,KAAnB,MAA8BC,OAArD;AACA,UAAIQ,iBAAiB,GAAGH,UAAU,IAAI7B,KAAK,CAACU,YAAN,CAAmBa,KAAnB,MAA8BvB,KAAK,CAACiC,eAAN,CAAsBV,KAAtB,CAApE;AACA,UAAIQ,gBAAgB,IAAIC,iBAAxB,EAA2ChC,KAAK,CAACkC,OAAN,CAAcT,QAAd,EAAwBC,IAAxB,EAhBA,CAgB+B;;AAE1E,UAAI,CAACI,IAAL,EAAW9B,KAAK,CAACmB,cAAN,GAAuBjC,QAAQ,CAACc,KAAK,CAACmB,cAAP,EAAuBO,IAAvB,CAA/B;AACZ,KAnBD;;AAqBA1B,IAAAA,KAAK,CAACmC,YAAN,GAAqB,YAAY;AAC/B,UAAInC,KAAK,CAACoC,OAAV,EAAmB;AACnBpC,MAAAA,KAAK,CAACoC,OAAN,GAAgB,IAAhB;AACApC,MAAAA,KAAK,CAACqC,OAAN,GAAgBC,qBAAqB,CAACtC,KAAK,CAACuC,MAAP,CAArC;AACD,KAJD;;AAMAvC,IAAAA,KAAK,CAACuC,MAAN,GAAe,YAAY;AACzB,UAAI,CAACvC,KAAK,CAACwC,OAAX,EAAoB;AACpBxC,MAAAA,KAAK,CAACoC,OAAN,GAAgB,KAAhB;AACApC,MAAAA,KAAK,CAACiC,eAAN,GAAwBjC,KAAK,CAACU,YAA9B;AACAV,MAAAA,KAAK,CAACU,YAAN,GAAqBV,KAAK,CAACyC,mBAAN,EAArB;AACAzC,MAAAA,KAAK,CAAC0C,WAAN,GAAoB1C,KAAK,CAAC2C,cAAN,EAApB;AACA,UAAIC,YAAY,GAAG5C,KAAK,CAAC4B,KAAzB;AAAA,UACIiB,cAAc,GAAGD,YAAY,CAACC,cADlC;AAAA,UAEIC,qBAAqB,GAAGF,YAAY,CAACE,qBAFzC;AAAA,UAGIC,eAAe,GAAGH,YAAY,CAACG,eAHnC;AAAA,UAIIC,sBAAsB,GAAGJ,YAAY,CAACI,sBAJ1C;AAAA,UAKIC,SAAS,GAAGL,YAAY,CAACK,SAL7B;AAAA,UAMIC,gBAAgB,GAAGN,YAAY,CAACM,gBANpC;AAAA,UAOIC,WAAW,GAAGP,YAAY,CAACO,WAP/B;AAAA,UAQIC,kBAAkB,GAAGR,YAAY,CAACQ,kBARtC;AAAA,UASIC,YAAY,GAAGT,YAAY,CAACS,YAThC;AAAA,UAUIC,mBAAmB,GAAGV,YAAY,CAACU,mBAVvC;AAAA,UAWIC,WAAW,GAAGX,YAAY,CAACW,WAX/B;AAAA,UAYIC,UAAU,GAAGZ,YAAY,CAACY,UAZ9B;AAAA,UAaIC,QAAQ,GAAGb,YAAY,CAACa,QAb5B;AAcA,UAAIC,OAAO,GAAG;AACZ/C,QAAAA,YAAY,EAAE;AACZc,UAAAA,QAAQ,EAAEoB,cADE;AAEZnB,UAAAA,IAAI,EAAE;AAFM,SADF;AAKZd,QAAAA,aAAa,EAAE;AACba,UAAAA,QAAQ,EAAEsB,eADG;AAEbrB,UAAAA,IAAI,EAAE;AAFO,SALH;AASZZ,QAAAA,OAAO,EAAE;AACPW,UAAAA,QAAQ,EAAEwB,SADH;AAEPvB,UAAAA,IAAI,EAAE;AAFC,SATG;AAaZX,QAAAA,SAAS,EAAE;AACTU,UAAAA,QAAQ,EAAE8B,WADD;AAET7B,UAAAA,IAAI,EAAE;AAFG,SAbC;AAiBZV,QAAAA,QAAQ,EAAE;AACRS,UAAAA,QAAQ,EAAE+B,UADF;AAER9B,UAAAA,IAAI,EAAE;AAFE,SAjBE;AAqBZT,QAAAA,SAAS,EAAE;AACTQ,UAAAA,QAAQ,EAAE0B,WADD;AAETzB,UAAAA,IAAI,EAAE;AAFG,SArBC;AAyBZR,QAAAA,UAAU,EAAE;AACVO,UAAAA,QAAQ,EAAE4B,YADA;AAEV3B,UAAAA,IAAI,EAAE;AAFI;AAzBA,OAAd;AA8BA,UAAIF,OAAO,GAAG;AACZb,QAAAA,YAAY,EAAE;AACZc,UAAAA,QAAQ,EAAEqB,qBADE;AAEZpB,UAAAA,IAAI,EAAE;AAFM,SADF;AAKZd,QAAAA,aAAa,EAAE;AACba,UAAAA,QAAQ,EAAEuB,sBADG;AAEbtB,UAAAA,IAAI,EAAE;AAFO,SALH;AASZZ,QAAAA,OAAO,EAAE;AACPW,UAAAA,QAAQ,EAAEyB,gBADH;AAEPxB,UAAAA,IAAI,EAAE;AAFC,SATG;AAaZT,QAAAA,SAAS,EAAE;AACTQ,UAAAA,QAAQ,EAAE2B,kBADD;AAET1B,UAAAA,IAAI,EAAE;AAFG,SAbC;AAiBZR,QAAAA,UAAU,EAAE;AACVO,UAAAA,QAAQ,EAAE6B,mBADA;AAEV5B,UAAAA,IAAI,EAAE;AAFI;AAjBA,OAAd;;AAuBA1C,MAAAA,OAAO,CAACgB,KAAK,CAAC4B,KAAP,EAAc,UAAd,EAA0B,IAA1B,EAAgC9C,QAAQ,CAAC,EAAD,EAAKkB,KAAK,CAAC4B,KAAX,EAAkB;AAC/DlB,QAAAA,YAAY,EAAEV,KAAK,CAACU;AAD2C,OAAlB,CAAxC,CAAP;;AAIAV,MAAAA,KAAK,CAAC2D,YAAN,GA7EyB,CA6EH;;;AAGtB1E,MAAAA,QAAQ,CAACuC,OAAD,EAAU,UAAUoC,IAAV,EAAgBrC,KAAhB,EAAuB;AACvC,eAAOvB,KAAK,CAACqB,IAAN,CAAWuC,IAAX,EAAiBrC,KAAjB,EAAwB,IAAxB,CAAP;AACD,OAFO,CAAR;;AAIAtC,MAAAA,QAAQ,CAACyE,OAAD,EAAU,UAAUE,IAAV,EAAgBrC,KAAhB,EAAuB;AACvC,eAAOvB,KAAK,CAACqB,IAAN,CAAWuC,IAAX,EAAiBrC,KAAjB,CAAP;AACD,OAFO,CAAR;;AAIA,UAAIkC,QAAQ,KAAK,SAAjB,EAA4BzD,KAAK,CAACmC,YAAN;AAC7B,KAzFD;;AA2FA,WAAOnC,KAAP;AACD;;AAED,MAAI6D,MAAM,GAAG/D,UAAU,CAACgE,SAAxB,CAjJkD,CAmJlD;AACA;AACA;;AACAD,EAAAA,MAAM,CAACE,iBAAP,GAA2B,SAASA,iBAAT,GAA6B;AACtD,SAAKvB,OAAL,GAAe,IAAf;AACA,QAAI,CAAC3C,SAAS,EAAd,EAAkB;AAClB,QAAImE,YAAY,GAAG,KAAKpC,KAAxB;AAAA,QACIqC,OAAO,GAAGD,YAAY,CAACC,OAD3B;AAAA,QAEIC,WAAW,GAAGF,YAAY,CAACE,WAF/B;AAAA,QAGIT,QAAQ,GAAGO,YAAY,CAACP,QAH5B;AAIA,SAAKf,WAAL,GAAmB,KAAKC,cAAL,EAAnB;AACA,SAAKwB,cAAL,CAAoBF,OAApB,EAA6BR,QAA7B;AACA,QAAIS,WAAJ,EAAiB,KAAK3B,MAAL;AAClB,GAVD;;AAYAsB,EAAAA,MAAM,CAACO,kBAAP,GAA4B,SAASA,kBAAT,CAA4BC,SAA5B,EAAuC;AACjE,QAAIC,aAAa,GAAGD,SAAS,CAACxC,UAAV,KAAyB,KAAKD,KAAL,CAAWC,UAApC,IAAkDwC,SAAS,CAACvC,IAAV,KAAmB,KAAKF,KAAL,CAAWE,IAAhF,IAAwFuC,SAAS,CAACZ,QAAV,KAAuB,KAAK7B,KAAL,CAAW6B,QAA9I,CADiE,CACuF;;AAExJ,QAAIa,aAAJ,EAAmB,KAAKnD,cAAL,GAAsB,EAAtB;;AAEnB,QAAIkD,SAAS,CAACJ,OAAV,KAAsB,KAAKrC,KAAL,CAAWqC,OAAjC,IAA4CI,SAAS,CAACZ,QAAV,KAAuB,KAAK7B,KAAL,CAAW6B,QAAlF,EAA4F;AAC1F,WAAKc,gBAAL,CAAsBF,SAAS,CAACJ,OAAhC;AACA,WAAKE,cAAL,CAAoB,KAAKvC,KAAL,CAAWqC,OAA/B,EAAwC,KAAKrC,KAAL,CAAW6B,QAAnD;AACD;AACF,GATD;;AAWAI,EAAAA,MAAM,CAACW,oBAAP,GAA8B,SAASA,oBAAT,GAAgC;AAC5D,QAAIP,OAAO,GAAG,KAAKrC,KAAL,CAAWqC,OAAzB;AACA,SAAKM,gBAAL,CAAsBN,OAAtB;AACA,SAAKzB,OAAL,GAAe,KAAf;AACD,GAJD;;AAMAqB,EAAAA,MAAM,CAACM,cAAP,GAAwB,SAASA,cAAT,CAAwBF,OAAxB,EAAiCR,QAAjC,EAA2C;AACjE,QAAIA,QAAQ,KAAK,QAAjB,EAA2B;AACzB,UAAIQ,OAAJ,EAAa;AACXxE,QAAAA,UAAU,CAACgF,GAAX,CAAe,QAAf,EAAyB,KAAKtC,YAA9B,EAA4C;AAC1CuC,UAAAA,MAAM,EAAET;AADkC,SAA5C;AAGAxE,QAAAA,UAAU,CAACgF,GAAX,CAAe,QAAf,EAAyB,KAAKtC,YAA9B,EAA4C;AAC1CuC,UAAAA,MAAM,EAAET;AADkC,SAA5C;AAGD;;AAED;AACD,KAZgE,CAY/D;AACF;;;AAGA,SAAK9B,YAAL;AACD,GAjBD;;AAmBA0B,EAAAA,MAAM,CAACU,gBAAP,GAA0B,SAASA,gBAAT,CAA0BN,OAA1B,EAAmC;AAC3D,QAAIA,OAAJ,EAAa;AACXxE,MAAAA,UAAU,CAACkF,KAAX,CAAiB,QAAjB,EAA2B,KAAKxC,YAAhC,EAA8C;AAC5CuC,QAAAA,MAAM,EAAET;AADoC,OAA9C;AAGAxE,MAAAA,UAAU,CAACkF,KAAX,CAAiB,QAAjB,EAA2B,KAAKxC,YAAhC,EAA8C;AAC5CuC,QAAAA,MAAM,EAAET;AADoC,OAA9C;AAGD;;AAED,QAAI,KAAK5B,OAAT,EAAkBuC,oBAAoB,CAAC,KAAKvC,OAAN,CAApB;AACnB,GAXD,CAWE;AACF;AACA;AAbA;;AAgBAwB,EAAAA,MAAM,CAAC3B,OAAP,GAAiB,SAASA,OAAT,CAAiBT,QAAjB,EAA2BC,IAA3B,EAAiC;AAChD,QAAIG,UAAU,GAAG,KAAKD,KAAL,CAAWC,UAA5B;AACA,QAAI,CAACJ,QAAL,EAAe,OAFiC,CAEzB;;AAEvB,QAAI,CAACI,UAAD,IAAe1C,SAAS,CAAC,KAAKgC,cAAN,EAAsBO,IAAtB,CAA5B,EAAyD;AACzDD,IAAAA,QAAQ,CAAC,IAAD,EAAO3C,QAAQ,CAAC,EAAD,EAAK,KAAK8C,KAAV,EAAiB;AACtClB,MAAAA,YAAY,EAAE,KAAKA;AADmB,KAAjB,CAAf,CAAR;AAGA,SAAKS,cAAL,CAAoB0D,IAApB,CAAyBnD,IAAzB;AACD,GATD;;AAWAmC,EAAAA,MAAM,CAACF,YAAP,GAAsB,SAASA,YAAT,GAAwB;AAC5C,QAAImB,MAAM,GAAG,IAAb;;AAEA,QAAIC,kBAAkB,GAAG,KAAKrE,YAA9B;AAAA,QACIsE,gBAAgB,GAAGD,kBAAkB,CAACC,gBAD1C;AAAA,QAEIC,YAAY,GAAGF,kBAAkB,CAACE,YAFtC;AAGA,QAAIC,QAAQ,GAAG,KAAKtD,KAAL,CAAWsD,QAA1B;;AAEAjG,IAAAA,QAAQ,CAACiG,QAAD,EAAW,UAAUzD,QAAV,EAAoB0D,MAApB,EAA4B;AAC7C,UAAIC,WAAW,GAAGC,MAAM,CAACF,MAAD,CAAxB;;AAEA,UAAIC,WAAW,IAAIH,YAAY,IAAIG,WAAnC,EAAgD;AAC9CN,QAAAA,MAAM,CAAC5C,OAAP,CAAeT,QAAf,EAAyB0D,MAAzB;;AAEA;AACD;;AAED,UAAIG,eAAe,GAAG,CAAC,KAAKH,MAAN,EAAcI,KAAd,CAAoB,UAApB,CAAtB;AACA,UAAI,CAACD,eAAL,EAAsB;AACtB,UAAIE,eAAe,GAAGH,MAAM,CAACC,eAAe,CAAC,CAAD,CAAhB,CAAN,GAA6B,GAAnD;AACA,UAAIN,gBAAgB,IAAIQ,eAAxB,EAAyCV,MAAM,CAAC5C,OAAP,CAAeT,QAAf,EAAyB0D,MAAzB;AAC1C,KAbO,CAAR;AAcD,GAtBD,CAjOkD,CAyPlD;AACA;AACA;;;AACAtB,EAAAA,MAAM,CAACpB,mBAAP,GAA6B,SAASA,mBAAT,GAA+B;AAC1D,QAAIgD,MAAM,GAAG,KAAK7D,KAAL,CAAW6D,MAAxB;;AAEA,QAAIC,qBAAqB,GAAG,KAAKtE,GAAL,CAASuE,OAAT,CAAiBC,qBAAjB,EAA5B;AAAA,QACIC,MAAM,GAAGH,qBAAqB,CAACG,MADnC;AAAA,QAEIC,MAAM,GAAGJ,qBAAqB,CAACI,MAFnC;AAAA,QAGIC,GAAG,GAAGL,qBAAqB,CAACK,GAHhC;AAAA,QAIIC,KAAK,GAAGN,qBAAqB,CAACM,KAJlC;;AAMA,QAAIC,gBAAgB,GAAGrG,eAAe,CAAC6F,MAAD,CAAtC;AAAA,QACIS,SAAS,GAAGD,gBAAgB,CAAC,CAAD,CADhC;AAAA,QAEIE,YAAY,GAAGF,gBAAgB,CAAC,CAAD,CAFnC;;AAIA,QAAIG,SAAS,GAAG,KAAKzD,cAAL,EAAhB;AACA,QAAI0D,SAAS,GAAGD,SAAS,GAAG,KAAK1D,WAAjB,GAA+B,MAA/B,GAAwC,IAAxD;AACA,QAAIzB,SAAS,GAAG8E,GAAG,GAAGG,SAAtB;AACA,QAAIvF,YAAY,GAAGkF,MAAM,GAAGM,YAA5B;AACA,QAAIlB,YAAY,GAAGtE,YAAY,GAAG,CAAH,GAAO2F,IAAI,CAACC,GAAL,CAASR,GAAG,GAAG,CAAC,CAAhB,EAAmB,CAAnB,CAAtC;AACA,QAAIf,gBAAgB,GAAGC,YAAY,GAAGa,MAAtC;AACA,QAAIlF,aAAa,GAAGiF,MAAM,IAAIM,YAAV,IAA0BN,MAAM,IAAIW,MAAM,CAACC,WAA/D;AACA,QAAIvF,UAAU,GAAG6E,GAAG,IAAIG,SAAP,IAAoBH,GAAG,IAAIS,MAAM,CAACC,WAAnD;AACA,QAAI5F,IAAI,GAAGK,UAAU,IAAIN,aAAzB;AACA,QAAIE,OAAO,GAAGG,SAAS,IAAI,CAACN,YAA5B;AACA,QAAIK,QAAQ,GAAG,CAACE,UAAU,IAAID,SAAf,KAA6B,CAACN,YAA7C;AACA,QAAII,SAAS,GAAG,CAACC,QAAjB;AACA,WAAO;AACLL,MAAAA,YAAY,EAAEA,YADT;AAELC,MAAAA,aAAa,EAAEA,aAFV;AAGLyF,MAAAA,SAAS,EAAEA,SAHN;AAILxF,MAAAA,IAAI,EAAEA,IAJD;AAKLiF,MAAAA,MAAM,EAAEA,MALH;AAMLhF,MAAAA,OAAO,EAAEA,OANJ;AAOLkE,MAAAA,gBAAgB,EAAEA,gBAPb;AAQLC,MAAAA,YAAY,EAAEA,YART;AASLlE,MAAAA,SAAS,EAAEA,SATN;AAULC,MAAAA,QAAQ,EAAEA,QAVL;AAWLC,MAAAA,SAAS,EAAEA,SAXN;AAYLC,MAAAA,UAAU,EAAEA,UAZP;AAaL8E,MAAAA,KAAK,EAAEA;AAbF,KAAP;AAeD,GAxCD;;AA0CAnC,EAAAA,MAAM,CAAClB,cAAP,GAAwB,SAASA,cAAT,GAA0B;AAChD,QAAIsB,OAAO,GAAG,KAAKrC,KAAL,CAAWqC,OAAzB;;AAEA,QAAIA,OAAJ,EAAa;AACX;AACA,aAAOA,OAAO,KAAKuC,MAAZ,GAAqBA,MAAM,CAAC9D,WAA5B,GAA0CuB,OAAO,CAACyC,SAAzD;AACD;;AAED,WAAO,CAAP;AACD,GATD,CASE;AACF;AACA;AAXA;;AAcA7C,EAAAA,MAAM,CAAC8C,MAAP,GAAgB,SAASA,MAAT,GAAkB;AAChC,QAAIC,QAAQ,GAAG,KAAKhF,KAAL,CAAWgF,QAA1B;AACA,QAAIC,WAAW,GAAGnH,cAAc,CAACI,UAAD,EAAa,KAAK8B,KAAlB,CAAhC;AACA,QAAIkF,IAAI,GAAGnH,iBAAiB,CAACG,UAAD,EAAa,KAAK8B,KAAlB,CAA5B;AACA,WAAO,aAAatC,KAAK,CAACyH,aAAN,CAAoB3H,GAApB,EAAyB;AAC3C4H,MAAAA,QAAQ,EAAE,KAAK5F;AAD4B,KAAzB,EAEjB,aAAa9B,KAAK,CAACyH,aAAN,CAAoBF,WAApB,EAAiCC,IAAjC,EAAuCF,QAAvC,CAFI,CAApB;AAGD,GAPD;;AASA,SAAO9G,UAAP;AACD,CA9T6B,CA8T5BP,SA9T4B,CAA9B;;AAgUAO,UAAU,CAACmH,YAAX,GAA0B,CAAC,IAAD,EAAO,UAAP,EAAmB,SAAnB,EAA8B,YAA9B,EAA4C,aAA5C,EAA2D,QAA3D,EAAqE,gBAArE,EAAuF,uBAAvF,EAAgH,iBAAhH,EAAmI,wBAAnI,EAA6J,aAA7J,EAA4K,YAA5K,EAA0L,UAA1L,EAAsM,WAAtM,EAAmN,kBAAnN,EAAuO,aAAvO,EAAsP,oBAAtP,EAA4Q,cAA5Q,EAA4R,qBAA5R,EAAmT,UAAnT,EAA+T,MAA/T,EAAuU,UAAvU,CAA1B;AACA,SAASnH,UAAU,IAAIoH,OAAvB;AACApH,UAAU,CAACqH,SAAX,GAAuBC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwC;AAC7D;AACAC,EAAAA,EAAE,EAAElI,SAAS,CAACmI,WAF+C;;AAI7D;AACAZ,EAAAA,QAAQ,EAAEvH,SAAS,CAACoI,IALyC;;AAO7D;AACAxD,EAAAA,OAAO,EAAE5E,SAAS,CAACqI,MAR0C;;AAU7D;AACF;AACA;AACA;AACE7F,EAAAA,UAAU,EAAExC,SAAS,CAACsI,IAduC;;AAgB7D;AACAzD,EAAAA,WAAW,EAAE7E,SAAS,CAACsI,IAjBsC;;AAmB7D;AACF;AACA;AACA;AACA;AACA;AACE9E,EAAAA,cAAc,EAAExD,SAAS,CAACuI,IAzBmC;;AA2B7D;AACF;AACA;AACA;AACA;AACA;AACE9E,EAAAA,qBAAqB,EAAEzD,SAAS,CAACuI,IAjC4B;;AAmC7D;AACF;AACA;AACA;AACA;AACA;AACE7E,EAAAA,eAAe,EAAE1D,SAAS,CAACuI,IAzCkC;;AA2C7D;AACF;AACA;AACA;AACA;AACA;AACE5E,EAAAA,sBAAsB,EAAE3D,SAAS,CAACuI,IAjD2B;;AAmD7D;AACF;AACA;AACA;AACEnC,EAAAA,MAAM,EAAEpG,SAAS,CAACwI,SAAV,CAAoB,CAACxI,SAAS,CAACyI,MAAX,EAAmBzI,SAAS,CAAC0I,MAA7B,EAAqC1I,SAAS,CAAC2I,OAAV,CAAkB3I,SAAS,CAACwI,SAAV,CAAoB,CAACxI,SAAS,CAACyI,MAAX,EAAmBzI,SAAS,CAAC0I,MAA7B,CAApB,CAAlB,CAArC,CAApB,CAvDqD;;AAyD7D;AACAjG,EAAAA,IAAI,EAAEzC,SAAS,CAACsI,IA1D6C;;AA4D7D;AACAzC,EAAAA,QAAQ,EAAE7F,SAAS,CAACqI,MA7DyC;;AA+D7D;AACF;AACA;AACA;AACA;AACA;AACEzE,EAAAA,SAAS,EAAE5D,SAAS,CAACuI,IArEwC;;AAuE7D;AACF;AACA;AACA;AACA;AACA;AACE1E,EAAAA,gBAAgB,EAAE7D,SAAS,CAACuI,IA7EiC;;AA+E7D;AACF;AACA;AACA;AACA;AACA;AACErE,EAAAA,WAAW,EAAElE,SAAS,CAACuI,IArFsC;;AAuF7D;AACF;AACA;AACA;AACA;AACA;AACEpE,EAAAA,UAAU,EAAEnE,SAAS,CAACuI,IA7FuC;;AA+F7D;AACF;AACA;AACA;AACA;AACA;AACEzE,EAAAA,WAAW,EAAE9D,SAAS,CAACuI,IArGsC;;AAuG7D;AACF;AACA;AACA;AACA;AACA;AACExE,EAAAA,kBAAkB,EAAE/D,SAAS,CAACuI,IA7G+B;;AA+G7D;AACF;AACA;AACA;AACA;AACA;AACEvE,EAAAA,YAAY,EAAEhE,SAAS,CAACuI,IArHqC;;AAuH7D;AACF;AACA;AACA;AACA;AACA;AACEtE,EAAAA,mBAAmB,EAAEjE,SAAS,CAACuI,IA7H8B;;AA+H7D;AACF;AACA;AACA;AACA;AACA;AACEK,EAAAA,QAAQ,EAAE5I,SAAS,CAACuI,IArIyC;;AAuI7D;AACF;AACA;AACA;AACA;AACEnE,EAAAA,QAAQ,EAAEpE,SAAS,CAAC6I,KAAV,CAAgB,CAAC,QAAD,EAAW,SAAX,CAAhB;AA5ImD,CAAxC,GA6InB,EA7IJ;AA8IApI,UAAU,CAACqI,YAAX,GAA0B;AACxBlE,EAAAA,OAAO,EAAEpE,SAAS,KAAK2G,MAAL,GAAc,IADR;AAExB3E,EAAAA,UAAU,EAAE,KAFY;AAGxB4D,EAAAA,MAAM,EAAE,CAAC,CAAD,EAAI,CAAJ,CAHgB;AAIxB3D,EAAAA,IAAI,EAAE,IAJkB;AAKxB2B,EAAAA,QAAQ,EAAE;AALc,CAA1B","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport _invoke from \"lodash-es/invoke\";\nimport _forEach from \"lodash-es/forEach\";\nimport _without from \"lodash-es/without\";\nimport _includes from \"lodash-es/includes\";\nimport { Ref } from '@fluentui/react-component-ref';\nimport PropTypes from 'prop-types';\nimport React, { Component, createRef } from 'react';\nimport { eventStack, getElementType, getUnhandledProps, normalizeOffset, isBrowser } from '../../lib';\n/**\n * Visibility provides a set of callbacks for when a content appears in the viewport.\n */\n\nvar Visibility = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Visibility, _Component);\n\n  function Visibility() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n    _this.calculations = {\n      bottomPassed: false,\n      bottomVisible: false,\n      fits: false,\n      passing: false,\n      offScreen: false,\n      onScreen: false,\n      topPassed: false,\n      topVisible: false\n    };\n    _this.firedCallbacks = [];\n    _this.ref = /*#__PURE__*/createRef();\n\n    _this.fire = function (_ref, value, reverse) {\n      var callback = _ref.callback,\n          name = _ref.name;\n\n      if (reverse === void 0) {\n        reverse = false;\n      }\n\n      var _this$props = _this.props,\n          continuous = _this$props.continuous,\n          once = _this$props.once; // Heads up! For the execution is required:\n      // - current value correspond to the fired direction\n      // - `continuous` is true or calculation values are different\n\n      var matchesDirection = _this.calculations[value] !== reverse;\n      var executionPossible = continuous || _this.calculations[value] !== _this.oldCalculations[value];\n      if (matchesDirection && executionPossible) _this.execute(callback, name); // Heads up! We should remove callback from the happened when it's not `once`\n\n      if (!once) _this.firedCallbacks = _without(_this.firedCallbacks, name);\n    };\n\n    _this.handleUpdate = function () {\n      if (_this.ticking) return;\n      _this.ticking = true;\n      _this.frameId = requestAnimationFrame(_this.update);\n    };\n\n    _this.update = function () {\n      if (!_this.mounted) return;\n      _this.ticking = false;\n      _this.oldCalculations = _this.calculations;\n      _this.calculations = _this.computeCalculations();\n      _this.pageYOffset = _this.getPageYOffset();\n      var _this$props2 = _this.props,\n          onBottomPassed = _this$props2.onBottomPassed,\n          onBottomPassedReverse = _this$props2.onBottomPassedReverse,\n          onBottomVisible = _this$props2.onBottomVisible,\n          onBottomVisibleReverse = _this$props2.onBottomVisibleReverse,\n          onPassing = _this$props2.onPassing,\n          onPassingReverse = _this$props2.onPassingReverse,\n          onTopPassed = _this$props2.onTopPassed,\n          onTopPassedReverse = _this$props2.onTopPassedReverse,\n          onTopVisible = _this$props2.onTopVisible,\n          onTopVisibleReverse = _this$props2.onTopVisibleReverse,\n          onOffScreen = _this$props2.onOffScreen,\n          onOnScreen = _this$props2.onOnScreen,\n          updateOn = _this$props2.updateOn;\n      var forward = {\n        bottomPassed: {\n          callback: onBottomPassed,\n          name: 'onBottomPassed'\n        },\n        bottomVisible: {\n          callback: onBottomVisible,\n          name: 'onBottomVisible'\n        },\n        passing: {\n          callback: onPassing,\n          name: 'onPassing'\n        },\n        offScreen: {\n          callback: onOffScreen,\n          name: 'onOffScreen'\n        },\n        onScreen: {\n          callback: onOnScreen,\n          name: 'onOnScreen'\n        },\n        topPassed: {\n          callback: onTopPassed,\n          name: 'onTopPassed'\n        },\n        topVisible: {\n          callback: onTopVisible,\n          name: 'onTopVisible'\n        }\n      };\n      var reverse = {\n        bottomPassed: {\n          callback: onBottomPassedReverse,\n          name: 'onBottomPassedReverse'\n        },\n        bottomVisible: {\n          callback: onBottomVisibleReverse,\n          name: 'onBottomVisibleReverse'\n        },\n        passing: {\n          callback: onPassingReverse,\n          name: 'onPassingReverse'\n        },\n        topPassed: {\n          callback: onTopPassedReverse,\n          name: 'onTopPassedReverse'\n        },\n        topVisible: {\n          callback: onTopVisibleReverse,\n          name: 'onTopVisibleReverse'\n        }\n      };\n\n      _invoke(_this.props, 'onUpdate', null, _extends({}, _this.props, {\n        calculations: _this.calculations\n      }));\n\n      _this.fireOnPassed(); // Heads up! Reverse callbacks should be fired first\n\n\n      _forEach(reverse, function (data, value) {\n        return _this.fire(data, value, true);\n      });\n\n      _forEach(forward, function (data, value) {\n        return _this.fire(data, value);\n      });\n\n      if (updateOn === 'repaint') _this.handleUpdate();\n    };\n\n    return _this;\n  }\n\n  var _proto = Visibility.prototype;\n\n  // ----------------------------------------\n  // Lifecycle\n  // ----------------------------------------\n  _proto.componentDidMount = function componentDidMount() {\n    this.mounted = true;\n    if (!isBrowser()) return;\n    var _this$props3 = this.props,\n        context = _this$props3.context,\n        fireOnMount = _this$props3.fireOnMount,\n        updateOn = _this$props3.updateOn;\n    this.pageYOffset = this.getPageYOffset();\n    this.attachHandlers(context, updateOn);\n    if (fireOnMount) this.update();\n  };\n\n  _proto.componentDidUpdate = function componentDidUpdate(prevProps) {\n    var cleanHappened = prevProps.continuous !== this.props.continuous || prevProps.once !== this.props.once || prevProps.updateOn !== this.props.updateOn; // Heads up! We should clean up array of happened callbacks, if values of these props are changed\n\n    if (cleanHappened) this.firedCallbacks = [];\n\n    if (prevProps.context !== this.props.context || prevProps.updateOn !== this.props.updateOn) {\n      this.unattachHandlers(prevProps.context);\n      this.attachHandlers(this.props.context, this.props.updateOn);\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var context = this.props.context;\n    this.unattachHandlers(context);\n    this.mounted = false;\n  };\n\n  _proto.attachHandlers = function attachHandlers(context, updateOn) {\n    if (updateOn === 'events') {\n      if (context) {\n        eventStack.sub('resize', this.handleUpdate, {\n          target: context\n        });\n        eventStack.sub('scroll', this.handleUpdate, {\n          target: context\n        });\n      }\n\n      return;\n    } // Heads up!\n    // We will deal with `repaint` there\n\n\n    this.handleUpdate();\n  };\n\n  _proto.unattachHandlers = function unattachHandlers(context) {\n    if (context) {\n      eventStack.unsub('resize', this.handleUpdate, {\n        target: context\n      });\n      eventStack.unsub('scroll', this.handleUpdate, {\n        target: context\n      });\n    }\n\n    if (this.frameId) cancelAnimationFrame(this.frameId);\n  } // ----------------------------------------\n  // Callback handling\n  // ----------------------------------------\n  ;\n\n  _proto.execute = function execute(callback, name) {\n    var continuous = this.props.continuous;\n    if (!callback) return; // Heads up! When `continuous` is true, callback will be fired always\n\n    if (!continuous && _includes(this.firedCallbacks, name)) return;\n    callback(null, _extends({}, this.props, {\n      calculations: this.calculations\n    }));\n    this.firedCallbacks.push(name);\n  };\n\n  _proto.fireOnPassed = function fireOnPassed() {\n    var _this2 = this;\n\n    var _this$calculations = this.calculations,\n        percentagePassed = _this$calculations.percentagePassed,\n        pixelsPassed = _this$calculations.pixelsPassed;\n    var onPassed = this.props.onPassed;\n\n    _forEach(onPassed, function (callback, passed) {\n      var pixelsValue = Number(passed);\n\n      if (pixelsValue && pixelsPassed >= pixelsValue) {\n        _this2.execute(callback, passed);\n\n        return;\n      }\n\n      var matchPercentage = (\"\" + passed).match(/^(\\d+)%$/);\n      if (!matchPercentage) return;\n      var percentageValue = Number(matchPercentage[1]) / 100;\n      if (percentagePassed >= percentageValue) _this2.execute(callback, passed);\n    });\n  };\n\n  // ----------------------------------------\n  // Helpers\n  // ----------------------------------------\n  _proto.computeCalculations = function computeCalculations() {\n    var offset = this.props.offset;\n\n    var _this$ref$current$get = this.ref.current.getBoundingClientRect(),\n        bottom = _this$ref$current$get.bottom,\n        height = _this$ref$current$get.height,\n        top = _this$ref$current$get.top,\n        width = _this$ref$current$get.width;\n\n    var _normalizeOffset = normalizeOffset(offset),\n        topOffset = _normalizeOffset[0],\n        bottomOffset = _normalizeOffset[1];\n\n    var newOffset = this.getPageYOffset();\n    var direction = newOffset > this.pageYOffset ? 'down' : 'up';\n    var topPassed = top < topOffset;\n    var bottomPassed = bottom < bottomOffset;\n    var pixelsPassed = bottomPassed ? 0 : Math.max(top * -1, 0);\n    var percentagePassed = pixelsPassed / height;\n    var bottomVisible = bottom >= bottomOffset && bottom <= window.innerHeight;\n    var topVisible = top >= topOffset && top <= window.innerHeight;\n    var fits = topVisible && bottomVisible;\n    var passing = topPassed && !bottomPassed;\n    var onScreen = (topVisible || topPassed) && !bottomPassed;\n    var offScreen = !onScreen;\n    return {\n      bottomPassed: bottomPassed,\n      bottomVisible: bottomVisible,\n      direction: direction,\n      fits: fits,\n      height: height,\n      passing: passing,\n      percentagePassed: percentagePassed,\n      pixelsPassed: pixelsPassed,\n      offScreen: offScreen,\n      onScreen: onScreen,\n      topPassed: topPassed,\n      topVisible: topVisible,\n      width: width\n    };\n  };\n\n  _proto.getPageYOffset = function getPageYOffset() {\n    var context = this.props.context;\n\n    if (context) {\n      // Heads up! `window` doesn't have `pageYOffset` property\n      return context === window ? window.pageYOffset : context.scrollTop;\n    }\n\n    return 0;\n  } // ----------------------------------------\n  // Render\n  // ----------------------------------------\n  ;\n\n  _proto.render = function render() {\n    var children = this.props.children;\n    var ElementType = getElementType(Visibility, this.props);\n    var rest = getUnhandledProps(Visibility, this.props);\n    return /*#__PURE__*/React.createElement(Ref, {\n      innerRef: this.ref\n    }, /*#__PURE__*/React.createElement(ElementType, rest, children));\n  };\n\n  return Visibility;\n}(Component);\n\nVisibility.handledProps = [\"as\", \"children\", \"context\", \"continuous\", \"fireOnMount\", \"offset\", \"onBottomPassed\", \"onBottomPassedReverse\", \"onBottomVisible\", \"onBottomVisibleReverse\", \"onOffScreen\", \"onOnScreen\", \"onPassed\", \"onPassing\", \"onPassingReverse\", \"onTopPassed\", \"onTopPassedReverse\", \"onTopVisible\", \"onTopVisibleReverse\", \"onUpdate\", \"once\", \"updateOn\"];\nexport { Visibility as default };\nVisibility.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Context which visibility should attach onscroll events. */\n  context: PropTypes.object,\n\n  /**\n   * When set to true a callback will occur anytime an element passes a condition not just immediately after the\n   * threshold is met.\n   */\n  continuous: PropTypes.bool,\n\n  /** Fires callbacks immediately after mount. */\n  fireOnMount: PropTypes.bool,\n\n  /**\n   * Element's bottom edge has passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassed: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed top of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomPassedReverse: PropTypes.func,\n\n  /**\n   * Element's bottom edge has passed bottom of screen\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisible: PropTypes.func,\n\n  /**\n   * Element's bottom edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onBottomVisibleReverse: PropTypes.func,\n\n  /**\n   * Value that context should be adjusted in pixels. Useful for making content appear below content fixed to the\n   * page.\n   */\n  offset: PropTypes.oneOfType([PropTypes.number, PropTypes.string, PropTypes.arrayOf(PropTypes.oneOfType([PropTypes.number, PropTypes.string]))]),\n\n  /** When set to false a callback will occur each time an element passes the threshold for a condition. */\n  once: PropTypes.bool,\n\n  /** Element is not visible on the screen. */\n  onPassed: PropTypes.object,\n\n  /**\n   * Any part of an element is visible on screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassing: PropTypes.func,\n\n  /**\n   * Element's top has not passed top of screen but bottom has.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onPassingReverse: PropTypes.func,\n\n  /**\n   * Element is not visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOffScreen: PropTypes.func,\n\n  /**\n   * Element is visible on the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onOnScreen: PropTypes.func,\n\n  /**\n   * Element's top edge has passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassed: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed top of the screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopPassedReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisible: PropTypes.func,\n\n  /**\n   * Element's top edge has not passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onTopVisibleReverse: PropTypes.func,\n\n  /**\n   * Element's top edge has passed bottom of screen.\n   *\n   * @param {null}\n   * @param {object} data - All props.\n   */\n  onUpdate: PropTypes.func,\n\n  /**\n   * Allows to choose the mode of the position calculations:\n   * - `events` - (default) update and fire callbacks only on scroll/resize events\n   * - `repaint` - update and fire callbacks on browser repaint (animation frames)\n   */\n  updateOn: PropTypes.oneOf(['events', 'repaint'])\n} : {};\nVisibility.defaultProps = {\n  context: isBrowser() ? window : null,\n  continuous: false,\n  offset: [0, 0],\n  once: true,\n  updateOn: 'events'\n};"]},"metadata":{},"sourceType":"module"}